<?xml version="1.0" encoding="UTF-8"?>

<chapter xml:id="codeplug"
         xmlns:xlink="http://www.w3.org/1999/xlink">

<title>Extensible Codeplug File Format</title>
<tip>
  <para>
    This document describes the extensible codeplug file format using YAML. If you are unfamiliar
    with YAML, consider reading a 
    <link xlink:href="https://learn.getgrav.org/16/advanced/yaml">YAML introduction</link> first.
    The documentation for the <emphasis>old</emphasis> table based <filename>conf</filename>-file format, can
    be found in section <link xlink:href="#conffile">Table Codeplug File Format</link>
  </para>
</tip>
<para>
  The introduction of device specific settings (with version 0.9.0) required an extensible codeplug
  file format. The <emphasis>old</emphasis> table based format did not allow for any extension without braking 
  backward compatibility. The new YAML based format allows for exactly that: Some means to extend 
  the format for device specific settings without breaking the format while maintaining some degree 
  of readability. (Yes, some users use the command line tool and edit their codeplug in a text 
  editor.)
</para>
<para>
  There are several levels, at which device specific extensions may appear within the codeplug. 
  There are global extensions that apply to the entire codeplug. These extensions are located at 
  the top level. There might also be extensions to single channels, contacts, zones, etc. These 
  extensions are then located under the specific element that gets extended. 
</para>

<section>
<title>General configuration</title>
<para>
  The general settings section contains all radio-wide settings. For example the microphone level, 
  boot text etc. For now, there aren't many.
</para>
<para>As an example, consider the following general settings</para>
<example pgwide="1">
  <title>General radio-wide settings.</title>
  <programlisting language="yaml"><![CDATA[settings:
  micLevel: 6
  speech: false
  introLine1: qDMR
  introLine2: DM3MAT
  defaultID: id1 
  squelch: 1
  vox: 0
  power: High
]]></programlisting>
</example>
<para>
  Here, the microphone amplification is set to 6, the speech synthesis is disabled, the two boot
  text lines are set to <quote>qDMR</quote> and <quote>DM3MAT</quote> respectively and the default 
  DMR radio ID is set to <quote>id1</quote>. The latter is the id of a radio ID defined below. 
</para>
<para>
  Also, the radio-wide default squelch, VOX and power level is set. These values can be referenced
  later in channels. Also, some radios do not allow for these settings to be applied on a 
  per-channel basis. For these radios, these values are used. 
</para>
<table>
  <caption>Possible fields:</caption>
  <thead> <tr><td>Element</td> <td>Description</td></tr> </thead>
  <tbody>
    <tr>
      <td><token>micLevel</token></td>
      <td>Specifies the microphone amplification. Must be an integer between 1 and 10.</td>
    </tr>
    <tr>
      <td><token>speech</token></td>
      <td>Enables/disables the speech synthesis. Some radios can announce the current 
        channel etc for the visually impaired. To enable that feature (if supported by the radio)
        set this field to <token>true</token>. Must be a boolean value.</td>
    </tr>
    <tr>
      <td><token>introLine1</token>, <token>introLine2</token></td>
      <td>Sets the two boot text lines (if supported by the radio). These text lines will show up 
        on the boot of the radio. If the radio is set to show a picture during boot, these lines are 
        not shown. </td>
    </tr>
    <tr>
      <td><token>defaultID</token></td>
      <td>Specifies which radio ID will be used as the default DMR ID (see 
        <link xlink:href="#radioIDs">Radio IDs</link> below). If none is specified, the first 
        defined DMR radio ID will be used.</td>
    </tr>
  </tbody>
</table>
</section>

<section xml:id="radioIDs">
<title>Radio IDs</title>
<para>
  The <token>radioIDs</token>-element specifies a list of radio IDs. Each radio ID is a map that 
  contains a single entry to specify the type. The key of the entry specifies the type name and 
  the value specifies the actual radio ID definition. Currently only the type <token>dmr</token> 
  is supported.
</para>
<para>
  As an example consider this radio ID list, containing only a single ID.
</para>
<example pgwide="1">
  <title>Radio ID definitions</title>
  <programlisting language="yaml"><![CDATA[radioIDs:
  - dmr: {id: id1, name: DM3MAT, number: 2621370} 
]]></programlisting>
</example>
<para> 
  This radio ID got the identifier <token>id1</token>, name <token>DM3MAT</token> 
  and number <token>2621370</token>.
</para>
<section>
<title>DMR Radio IDs (<token>dmr</token>)</title>
<para>
  The DMR radio ID definition consist of an optional <token>id</token> (necessary to reference 
  that ID later), a <token>name</token> and the DMR ID <token>number</token>. 
</para>
<table>
  <thead> <tr><td>Element</td> <td>Description</td></tr> </thead>
  <tbody>
    <tr>
      <td><token>id</token></td>
      <td>Specifies the identifier of the radio ID. This identifier can later be used to 
        associate the radio ID to channels. Any unique string is valid.</td>
    </tr>
    <tr>
      <td><token>name</token></td>
      <td>Specifies the name of the radio ID. This name may also be used as the radio name. 
        Any non-empty string is valid.</td>
    </tr>
    <tr>
      <td><token>number</token></td>
      <td>Specifies the DMR ID for this radio ID. That is any integer between 0 and 16777215.</td>
    </tr>
  </tbody>
</table>
</section>
</section>

<section xml:id="contacts">
<title>Contacts</title>
<para>
  The <token>contacts</token> element specifies a list of all contacts. Each contact is a map 
  that contains a single entry to specify the contact type. The key specifies the type name and 
  the value specifies the actual contact definition. Currently there are two possible contact 
  types.
</para>
<para>
  As an example consider this contact list, containing 4 contact definitions. One for each 
  type.
</para>
<example pgwide="1">
  <title>Contact definitions</title>
  <programlisting language="yaml"><![CDATA[contacts:
  - dmr: {id: ww, name: WW, type: GroupCall, number: 91}
  - dmr: {id: cont24, name: DM3MAT Hannes, type: PrivateCall, ring: true, number: 2621370}
  - dmr: {id: cont12, name: All Call, type: AllCall, number: 16777215}
  - dtmf: {id: dtmf1, name: DTMF example, number: "#123*"} 
]]></programlisting>
</example>
<section>
<title>DMR Contacts (<token>dmr</token>)</title>
<para>
  A DMR contact is a simple object and is usually defined in one line. Each contact contains
  an optional <token>id</token> that will be used to reference this contact throughout the
  codeplug (e.g., in channels, group lists, etc.). 
</para>
<table>
  <thead> <tr><td>Element</td> <td>Description</td></tr> </thead>
  <tbody>
    <tr>
      <td><token>id</token></td>
      <td>Specifies the identifier of the contact. This identifier can later be used to 
        reference the contact. Any unique string is valid.</td>
    </tr>
    <tr>
      <td><token>name</token></td>
      <td>Specifies the name of the contact. Any string is valid.</td>
    </tr>
    <tr>
      <td><token>type</token></td>
      <td>Specifies the type of the contact. Must be one of <token>PrivateCall</token>,
      <token>GroupCall</token> or <token>AllCall</token>.</td>
    </tr>
    <tr>
      <td><token>number</token></td>
      <td>Specifies the DMR ID for this contact. That is any integer between 0 and 
        16777215. This element is mandatory for all types except for the 
        <token>all</token>-call. For the all-call, the default number 16777215 will be 
        used if omitted.</td>
    </tr>
    <tr>
      <td><token>ring</token></td>
      <td>If <token>true</token>, the radio will ring whenever a call from this contact 
      is received (if supported by the radio). Optional, if omitted set to 
      <token>false</token>.</td>
    </tr>
  </tbody>
</table>
</section>
<section>
<title>Analog DMTF Contacts (<token>dtmf</token>)</title>
<para>
  An analog DTMF contact can be used to store commonly used DTMF sequences. For example, it may be
  used to control the <emphasis>EchoLink</emphasis> feature of a repeater.
</para>
<table>
  <thead> <tr><td>Element</td> <td>Description</td></tr> </thead>
  <tbody>
    <tr>
      <td><token>id</token></td>
      <td>Specifies the identifier of the contact. This identifier can later be used to 
        reference the contact. Any unique string is valid.</td>
    </tr>
    <tr>
      <td><token>name</token></td>
      <td>Specifies the name of the contact. Any string is valid.</td>
    </tr>
    <tr>
      <td><token>number</token></td>
      <td>Specifies the DTMF ID for this contact. That is any combination of numbers 
        <token>0-9</token> and symbols <token>A-D</token>, <token>*</token>, <token>#</token>.
      used.</td>
    </tr>
    <tr>
      <td><token>ring</token></td>
      <td>If <token>true</token>, the radio will ring whenever a call from this contact 
      is received (if supported by the radio). Optional, if omitted set to 
      <token>false</token>.</td>
    </tr>
  </tbody>
</table>
</section>
</section> 

<section xml:id="groupLists">
<title>Group lists</title>
<para>
  A group list collects several digital (DMR) contacts that should be received on a channel 
  associated with this group list. Consequently, a group list consists of a name and a list 
  of contact IDs. The <token>groupLists</token> element is then a list of several group list 
  definitions.
</para>
<para>
  As an example, consider the two group lists below:
</para>
<example pgwide="1">
  <title>Group list definition</title>
  <programlisting><![CDATA[groupLists:
  - {id: grp1, name: DL, contacts: [cont1, cont2, cont3]}
  - {id: grp2, name: Berlin/Brand, contacts: [cont6, cont5, cont7]}
]]></programlisting>
</example>
<para>
  The first group list has the internal ID <emphasis>grp1</emphasis>. This ID can then be used later
  to reference this group list. The name is set to <emphasis>DL</emphasis>. The list of contacts of the 
  group list is then defined as a list containing the IDs of the referenced contacts.
</para>
<table>
  <thead> <tr><td>Element</td> <td>Description</td></tr> </thead>
  <tbody>
    <tr>
      <td><token>id</token></td>
      <td>Specifies the ID of the group list. This ID can then be used to refer to the group list
        within digital channels. Any unique string is possible here.</td>
    </tr>
    <tr>
      <td><token>name</token></td>
      <td>Specifies the name of the group list. Any string is possible here.</td>
    </tr>
    <tr>
      <td><token>contacts</token></td>
      <td>A list of digital contact IDs. See <link xlink:href="#contacts">contacts</link> above.</td>
    </tr>
  </tbody>
</table>
</section>

<section>
<title>Channels</title>
<para>
  The <token>channels</token> list contains all channels defined within the codeplug. Usually, 
  DMR radios support at least two different channel type. Digital channels (DMR) and analog 
  channels (FM). To distinguish these two types, each entry of the channel list contains a 
  map with a single entry. The key specifies the type (either <token>digital</token> or 
  <token>analog</token>) while the value contains the actual channel definition.
</para>
<para>
  As an example consider the following two channel definitions:
</para>
<example pgwide="1">
  <title>Channel definition</title>
  <programlisting><![CDATA[channels:
  - digital:
      id: ch5
      name: BB DB0LDS TS2
      rxFrequency: 439.5625
      txFrequency: 431.9625
      power: High
      timeout: 0
      rxOnly: false
      scanList: scan1
      admit: ColorCode
      colorCode: 1
      timeSlot: TS2
      groupList: grp2
      contact: cont7
      radioID: !default
      roaming: !default
  - analog:
      id: ch76
      name: DB0LDS
      rxFrequency: 439.5625
      txFrequency: 431.9625
      power: High
      timeout: 0
      rxOnly: false
      admit: Always
      squelch: 1
      bandwidth: Narrow
      rxTone: {ctcss: 67}
      txTone: {ctcss: 67} 
]]></programlisting>
</example>
<para>
  The first channel is a digital (DMR) channel. Its ID is <emphasis>ch5</emphasis> and its name 
  <emphasis>BB DB0LDS TS2</emphasis>. The second channel is an analog channel (FM) with ID <emphasis>ch76</emphasis> 
  and name <emphasis>DB0LDS</emphasis>. Please note, that there are some common attributes like 
  <token>rxFrequency</token>, <token>txFrequency</token>, <token>power</token>, <token>timeout</token>,
  <token>rxOnly</token> and <token>scanList</token> but also type-specific settings like 
  <token>timeSlot</token> or <token>rxTone</token> which apply only to digital and analog 
  channels respectively.
</para>
<section>
<title>Common attributes</title>
<para>
  The following attributes are common for all channel types.
</para>
<table>
  <thead> <tr><td>Element</td> <td>Description</td></tr> </thead>
  <tbody>
    <tr>
      <td><token>id</token></td>
      <td>Specifies the ID of the channel, this can be used later to reference this channel in 
        <link xlink:href="#zones">zones</link> and <link xlink:href="#scanLists">scan lists</link>. 
        Any unique string is valid here.</td>
    </tr>
    <tr>
      <td><token>name</token></td>
      <td>Specifies the name of the channel. Any string is valid here.</td>
    </tr>
    <tr>
      <td><token>rxFrequency</token></td>
      <td>Specifies the RX frequency in MHz. Any floating point number is valid here.</td>
    </tr>
    <tr>
      <td><token>txFrequency</token></td>
      <td>Specifies the transmit frequency in MHz. If omitted, the RX frequency will be used. 
        Any floating point number is valid here.</td>
    </tr>
    <tr>
      <td><token>power</token></td>
      <td>Specifies the tranmit power of the channel. Must be one of <token>Min</token>, 
        <token>Low</token>, <token>Mid</token>, <token>High</token> or <token>Max</token>.</td>
    </tr>
    <tr>
      <td><token>timeout</token></td>
      <td>Specifies the transmit timeout in seconds. Any integer is valid here. Omitting this 
        field or setting it to <code>0</code> will disable the timeout.</td>
    </tr>
    <tr>
      <td><token>rxOnly</token></td>
      <td>If set to <token>true</token>, the channel can only receive. Omitting it or setting it
      to <token>false</token> will allow transmission on the channel.</td>
    </tr>
    <tr>
      <td><token>scanList</token></td>
      <td>Specifies the optional scan list for this channel. If set, this must be a reference to a 
        <link xlink:href="scanLists">scan list</link>.</td>
    </tr>
  </tbody>
</table>
</section>
<section>
<title>Digital channel attributes</title>
<para>
  The following attributes apply only to digital (DMR) channels.
</para>
<table>
  <thead> <tr><td>Element</td> <td>Description</td></tr> </thead>
  <tbody>
    <tr>
      <td><token>admit</token></td>
      <td>Specifies the admit criterion for the channel. This must be one of 
        <token>Always</token>, <token>Free</token> or <token>ColorCode</token>.</td>
    </tr>
    <tr>
      <td><token>colorCode</token></td>
      <td>Specifies the color code of the channel, any number between 0-16 is valid 
        here.</td>
    </tr>
    <tr>
      <td><token>timeSlot</token></td>
      <td>Specifies the time slot of the channel. Must be on of <token>TS1</token> or 
      <token>TS2</token>.</td>
    </tr>
    <tr>
      <td><token>groupList</token></td>
      <td>Specifies the RX group list for this channel. This must be a reference to 
        a <link xlink:href="#groupLists">group list</link>.</td>
    </tr>
    <tr>
      <td><token>contact</token></td>
      <td>Specifies the default transmit contact. This must be a reference to a digital 
        <link xlink:href="#contacts">contact</link>. If omitted, no default transmit contact is associated
        with the channel. Some radios require all channels to have a transmit contact.</td>
    </tr>
    <tr>
      <td><token>aprs</token></td>
      <td>Specifies the positioning system for this channel. If set, this must be a reference 
        to a <link xlink:href="#positioning">positioning system</link> (either DMR or APRS). </td>
    </tr>
    <tr>
      <td><token>roaming</token></td>
      <td>Specifies the roaming zone for this channel. If set it must be a reference to a
        <link xlink:href="#roaming">roaming zone</link>. To use the default roaming zone here, consider using 
        the <code>!default</code> tag instead of a direct reference to a specific zone. If omitted, 
        no roaming zone (also not the default one) is associated with the channel. </td>
    </tr>
    <tr>
      <td><token>radioID</token></td>
      <td>Specifies the radio ID for this channel. If set, it must be a reference to one of the 
        <link xlink:href="#radioIDs">radio IDs</link>. To use the default radio ID here, consider using 
        the <code>!default</code> tag instead of a direct reference to a specific ID. If omitted 
        the default radio ID is assumed. </td>
    </tr>
  </tbody>
</table>
</section>
<section>
<title>Analog channel attributes</title>
<para>
  The following attributes apply only to digital (FM) channels.
</para>
<table>
  <thead> <tr><td>Element</td> <td>Description</td></tr> </thead>
  <tbody>
    <tr>
      <td><token>admit</token></td>
      <td>Specifies the admit criterion for the channel. Must be one of <token>Always</token>,
      <token>Free</token> or <token>Tone</token>.</td>
    </tr>
    <tr>
      <td><token>squelch</token></td>
      <td>Specifies the squelch level for the channel. Must be an integer in the range of 
        [1-10].</td>
    </tr>
    <tr>
      <td><token>bandwidth</token></td>
      <td>Specifies the bandwidth of the channel. Must either be <token>Narrow</token> or 
      <token>Wide</token> for 12.5kHz or 25kHz respectively.</td>
    </tr>
    <tr>
      <td><token>rxTone</token></td>
      <td>Specifies the receive sub-tone setting for this channel. That is, the squelch will
        only open when a certain subtone is received along with the signal. As there are two 
        common subtone standards this attribute is a map with a single entry. The key specifies
        the type (either <token>ctcss</token> or <token>dcs</token>) while the value specifies the 
        actual subtone. For CTCSS tones, the value is the subtone frequency in Hz. For DCS it is
        the code number as an integer. For inverted DCS codes, use negative numbers. </td>
    </tr>
    <tr>
      <td><token>txTone</token></td>
      <td>Specifies the tranmit sub-tone setting for this channel. For details see 
        <token>rxTone</token> above.</td>
    </tr>
    <tr>
      <td><token>aprs</token></td>
      <td>Specifies the APRS positioning system of this channel. If set, it must be a 
        reference to an analog APRS system.</td>
    </tr>
  </tbody>
</table>
</section>
</section>

<section xml:id="zones">
<title>Zones</title>
<para>
  The <token>zones</token> element collects all zones defined within the codeplug. It is just a 
  list of zone definitions. Each zone has an ID (not needed), name and one or two lists of channels. 
  One for VFO A and one for VFO B. Depending on the radio, a zone will be split into two lists (if 
  defined) if the radio handles separate zones for each VFO. 
</para>  
<para>
  As an example, consider the following zone:
</para>
<example pgwide="1">
  <title>Zone definition</title>
  <programlisting><![CDATA[zones:
  - id: zone1
    name: KW
    A: [ch1, ch4, ch5, ch2, ch6, ch11, ch12, ch13, ch15, ch16, ch76, ch77, ch78, ch79]
    B: [ch97, ch101, ch102, ch103, ch68, ch69, ch70, ch71, ch72, ch73, ch74, ch75]
]]></programlisting>
</example>
<para>
  This zone has the name <emphasis>KW</emphasis> and contains two lists of channels. One for each VFO. On radios, 
  where each VFO is assigned a zone individually, this zone will be split into two: <emphasis>KW A</emphasis> and 
  <emphasis>KW B</emphasis> to match the radios configuration. 
</para>
<table>
  <thead> <tr><td>Element</td> <td>Description</td></tr> </thead>
  <tbody>
    <tr>
      <td><token>id</token></td>
      <td>Specifies the ID of the zone. For now, there are no codeplug elements that refer to zones.</td>
    </tr>
    <tr>
      <td><token>name</token></td>
      <td>Specifies the name of the zone. Any string is valid here.</td>
    </tr>
    <tr>
      <td><token>A</token></td>
      <td>Specifies the channel list for VFO A. This must be a list of references to channels.</td>
    </tr>
    <tr>
      <td><token>B</token></td>
      <td>Optional channel list for VFO B. If present, must be a list of references to channels.</td>
    </tr>
  </tbody>
</table>
</section>

<section xml:id="scanLists">
<title>Scan lists</title>
<para>
  Scan lists are simple lists of channels to scan. A scan list might be associated with a channel.
</para>
<para>
  As an example, consider the following scan list:
</para>
<example pgwide="1">
  <title></title>
  <programlisting><![CDATA[scanLists:
  - id: scan1
    name: KW
    channels: [ch4, ch5, ch76, ch77, ch97, ch102, ch68, ch112] 
]]></programlisting>
</example>
<para>
  This scan list has the ID <emphasis>scan1</emphasis>, the name <emphasis>KW</emphasis> and contains several channels 
  (both analog and digital).
</para>
<table>
  <thead> <tr><td>Element</td> <td>Description</td></tr> </thead>
  <tbody>
    <tr>
      <td><token>id</token></td>
      <td>Specifies the ID of the scan list. This ID can then be used to reference this scan 
        list in <link xlink:href="#channels">channels</link>.</td>
    </tr>
    <tr>
      <td><token>name</token></td>
      <td>Specifies the name of the scan list. Any string is valid here.</td>
    </tr>
    <tr>
      <td><token>primary</token></td>
      <td>Specifies the primary priority channel. Usually this channel is scanned very frequently. 
        If set, this must be a reference to a channel. If the tag <token>!selected</token> is used here,
        the channel from which the scan got started is used as the primary priority channel.</td>
    </tr>
    <tr>
      <td><token>secondary</token></td>
      <td>Specifies the secondary priority channel. Usually this channel is scanned frequently. 
        If set, this must be a reference to a channel. If the tag <token>!selected</token> is used here,
        the channel from which the scan got started is used as the secondary priority channel.</td>
    </tr>
    <tr>
      <td><token>revert</token></td>
      <td>Specifies the revert channel. That is, the channel to transmit on irrespective of the 
        current channel being scanned. If set, this must be a reference to a channel. If the tag 
        <token>!selected</token> is used here, the channel from which the scan got started is used 
        as the transmit channel. If omitted the radio will transmit on the currently scanned 
        channel.</td>
    </tr>
    <tr>
      <td><token>channels</token></td>
      <td>Specifies the list of channels to scan. Must be a list of reference to channels.</td>
    </tr>
  </tbody>
</table>
</section>

<section xml:id="positioning">
<title>Positioning Systems</title>
<para>
  Some radios allow to send the current position using DMR or analog APRS. Consequently, there are 
  two types of positioning systems <token>dmr</token> and <token>aprs</token>. 
</para>
<para>
  As an example, consider these two position reporting systems:
</para>
<example pgwide="1">
  <title></title>
  <programlisting><![CDATA[positioning:
  - dmr:
      id: aprs1
      name: BM ARPS
      period: 300
      contact: cont21
  - aprs:
      id: aprs2
      name: APRS APAT81
      period: 300
      revert: ch104
      icon: Jogger
      message: Y07, QRG 144.675
      destination: APAT81-0
      source: DM3MAT-7
      path: [WIDE1-1, WIDE2-1] 
]]></programlisting>
</example>
<para>
  The first specifies a digital (DMR) positioning system while the latter defines a APRS system.
</para>
<section>
<title>Common attributes</title>
<para>
  The following attributes apply to both, analog APRS and digital position reporting systems.
</para>
<table class="compact">
  <thead> <tr><td>Element</td> <td>Description</td></tr> </thead>
  <tbody>
    <tr>
      <td><token>id</token></td>
      <td>Specifies the ID of the system. This can be used reference this system in 
        <link xlink:href="#channels">channels</link>. Any unique string is valid here.</td>
    </tr>
    <tr>
      <td><token>name</token></td>
      <td>Specifies the name of the position reporting system. Any string is valid here.</td>
    </tr>
    <tr>
      <td><token>period</token></td>
      <td>Specifies the update period in seconds. If omitted or set to <token>0</token>, the 
      system will not send any updates periodically.</td>
    </tr>
  </tbody>
</table>
</section>
<section>
<title>DMR positioning system attributes</title>
<para>
  The following attributes apply only to digital (DMR) position reporting systems.
</para>
<table>
  <thead> <tr><td>Element</td> <td>Description</td></tr> </thead>
  <tbody>
    <tr>
      <td><token>contact</token></td>
      <td>Specifies the digital contact, the GPS information is send to. This must be a 
        reference to a digital contact.</td>
    </tr>
    <tr>
      <td><token>revert</token></td>
      <td>Specifies the revert channel. That is, the channel the data is send on. If set, 
        it must be a reference to a digital channel. If omitted or set to <token>!selected</token>,
        the currently active channel will be used to send the GPS information.</td>
    </tr>
  </tbody>
</table>
</section>
<section>
<title>APRS attributes</title>
<para>
  The following attributes apply only for APRS position reporting systems.
</para>
<table>
  <thead> <tr><td>Element</td> <td>Description</td></tr> </thead>
  <tbody>
    <tr>
      <td><token>revert</token></td>
      <td>Specifies the revert channel. That is, the channel the APRS information is send on.
        This must be a reference to an analog channel.</td>
    </tr>
    <tr>
      <td><token>destination</token></td>
      <td>Specifies the destination call and SSID, the information is set to. This must be a
        string in the form <token>CALL-SSID</token>.</td>
    </tr>
    <tr>
      <td><token>source</token></td>
      <td>Specifies the source call and SSID. See <token>destination</token> for details.</td>
    </tr>
    <tr>
      <td><token>path</token></td>
      <td>Specifies the optional packet path. If set, this must be a list of <token>CALL-SSID</token> 
      strings.</td>
    </tr>
    <tr>
      <td><token>icon</token></td>
      <td>Specifies the icon name to use. The icon name will be fuzzy matched. See 
        <link xlink:href="https://dm3mat.darc.de/qdmr/libdmrconf/classAPRSSystem.html">
        for a complete list</link> of icon names.</td>
    </tr>
    <tr>
      <td><token>message</token></td>
      <td>Specifies an optional message send along with the position information.</td>
    </tr>
  </tbody>
</table>
</section>
</section>

<section xml:id="roaming">
<title>Roaming Zones</title>
<para>
  Roaming zones are collections of channels, that are scanned for the strongest signal to 
  maintain connection to a particular network or talk group. Consequently, they group 
  channels with the same talk group.
</para>
<para>
  As an example, consider the following roaming zone:
</para>
<example pgwide="1">
  <title></title>
  <programlisting><![CDATA[roaming:
  - id: roam1
    name: Berlin/Brand
    channels: [ch3, ch8, ch14, ch18, ch20, ch24, ch26, ch30, ch34, ch38, ch42, ch50] 
]]></programlisting>
</example>
<para>
  This zone has the ID <emphasis>roam1</emphasis> and the name <emphasis>Berlin/Brand</emphasis>. This group collects 
all channels that provide access to the <emphasis>Berlin/Brandenburg</emphasis> talk group.
</para>
<table>
  <thead> <tr><td>Element</td> <td>Description</td></tr> </thead>
  <tbody>
    <tr>
      <td><token>id</token></td>
      <td>Specifies the ID of the roaming zone. This ID can then be used to refer to this 
        zone. Any unique string is valid here.</td>
    </tr>
    <tr>
      <td><token>name</token></td>
      <td>Specifies the name of the roaming zone. Any string is valid here.</td>
    </tr>
    <tr>
      <td><token>channels</token></td>
      <td>Specifies the member channels for this roaming zone. This must be a list of 
        references to digital channels.</td>
    </tr>
  </tbody>
</table>
</section>

<section xml:id="devspec">
<title>Device specific extensions</title>
<para>
  The sole reason for introducing a new YAML based codeplug format was the ability to extend the
  file format with device specific settings without breaking the format. This was simply impossible 
  with the <emphasis>old</emphasis> table based text files.
</para>
<para>
  The present YAML based codeplug file format is extensible at almost any level. That is, device 
  specific elements can be added to single codeplug elements like channels, zones or contacts but 
  also to the codeplug itself. The latter allows to extend the codeplug with new elements. 
</para>
</section>
</chapter>